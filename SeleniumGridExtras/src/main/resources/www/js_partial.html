<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
<script type="text/javascript">

    $('document').ready(function () {
        var hostID = -1;
        for (var i = 0; i < nodes.length; i++) {
            var host = nodes[i];
            hostID++;
            var hostUrl = "http://" + host + ":3000";

            $('#nodes').append("<div class='node well well-small span4' id='node" + hostID + "'></div>");
            $('#node' + hostID).append("<h4>" + host + "</h4><small>test value</small>");
            $('#node' + hostID).append("<div class='image text-center' id='image"+ hostID +"'><img src='data:image/gif;base64," + spinnerBase64 + "' style='padding-top: 110px;'/></div>");
            $('#node' + hostID).append("<div class='text-center' id='apilist"+ hostID +"'></div>");
            $('#apilist'+ hostID).append("<a href='" + hostUrl + "/move_mouse' class='btn btn-mini btn-success' target='new'>Move Mouse</a> ");
            $('#apilist'+ hostID).append("<a href='" + hostUrl + "/kill_chrome' class='btn btn-mini btn-danger' target='new'>Kill All Chrome</a> ");
            $('#apilist'+ hostID).append("<a href='" + hostUrl + "/kill_firefox' class='btn btn-mini btn-danger' target='new'>Kill All Firefox</a> ");
            $('#apilist'+ hostID).append("<a href='" + hostUrl + "/ps' class='btn btn-mini btn-info' target='new'>Get All Processes</a> ");

            var screenShotUrl = hostUrl + '/screenshot?callback=?';
            getImage(screenShotUrl, hostID);

        }

        function getImage(screenShotUrl, hostID) {
            var currentHostID = hostID;
            $.getJSON(screenShotUrl, '', function (res) {
                $("#image" + currentHostID +"").html("<img id='" + currentHostID + "' class='screenshot' src='data:image/png;base64," + res.image + "' style='display: none;'/>");
                $("#image" + currentHostID +" img").fadeIn();
            });
        }

    });

</script>